* 機械彫刻用標準文字 code 等幅フォント

[[imgs/title.png]]

* サンプル

機械彫刻用標準文字等幅

[[imgs/code8903.png]]

Monaco (参考)

[[imgs/monaco.png]]

一般的な等幅フォントに比べると、飾りがやや少なめです。

元のフォントの作られた経緯から、本質的に字画の密集や鋭角な交差が少なく
なっているため、フォントサイズを落としても字形がつぶれにくいです。特に
日本語は、機能的でありながらほどよく個性もある、味のある文字になってい
ます。

* ビルド

機械彫刻用標準文字のライセンスの都合で、再配布に許諾が必要なため、とり
あえず生成スクリプトだけ公開しています。

生成方法：

1. =fontforge=, =ttfautohint= をインストール

   Mac の場合は Homebrew で入ります。

   : brew install fontforge ttfautohint

   Windows の場合は手動で公式からインストーラをダウンロードしてインス
   トール＆ PATH を通すか、 Bash on Windows から =apt-get= でも入ると
   思います (試せていないので、ごめんなさい)。

   ※ =ttfautohint= は必須ではありませんが、フォントサイズを落として使
   用した場合の表示のクリアさに影響するのでインストール推奨です

2. 機械彫刻用標準文字フォントをダウンロード

   機械彫刻用標準文字フォントを公式からダウンロードして、
   =JISZ8903-Medium.otf= をこのディレクトリにコピーします。

3. Rounded M+ をダウンロード

   自家製 Rounded M+ フォントを公式からダウンロードして、
   =rounded-mplus-1m-regular.ttf= をこのディレクトリにコピーします。

4. スクリプトを実行

   : fontforge code8903.pe

   成功すると =code8903-Medium.ttf= (と中間生成物 =tmp_*= ... こちらは
   削除して構いません) が生成されます。

   ※ =ttfautohint= を使わない場合、上のコマンドに =--autohint= オプショ
   ンを追加して実行してください（代わりに =fontforge= 組み込みの
   =AutoHint= 機能を使います）。

5. ヒンティング情報を生成

   =ttfautohint= を使ってヒンティング情報を生成します。

   : ttfautohint --no-info code8903-Medium.ttf code8903-Medium-Hinted.ttf

   成功すると最終成果物 =code8903-Medium-Hinted.ttf= が生成されます。

   ※手順 4. ですでに =fontforge= の機能を使ってヒンティング情報を生成
   している場合、この手順は不要で、 =code8903-Medium.ttf= が最終成果物
   になります。

* アップデート

フォントに更新があった場合、新しいフォントをインストールする前に古いフォ
ントの情報を削除しないと反映されません。

1. インストール済みのフォントを削除

   Mac の場合は =Font Book= アプリケーションから削除できました。

2. フォントキャッシュをクリア

   Mac の場合は

   : sudo atsutil databases -remove

   でできました (パスワードを訊かれます)。

* オプション

- =--no-expandstroke=

  文字を均一にわずかに太らせる処理をスキップします。

  文字を太らせている目的は

  - 機械彫刻用標準文字に元から含まれている字形と Rounded M+ から合成し
    た字形との太さの違いを吸収して、難しい漢字を含むテキストでもリズム
    を崩さないため

  - コーディング用途なので、コントラスト低めのカラースキーム・小さめの
    フォントサイズに設定されてもある程度はっきり視認できるようにしたかっ
    たため

  ですが、文字を太らせると「本来の」字形からは微妙に形が変わってしまう
  ため、上のデメリットが問題にならない場合はこのオプションを設定するこ
  とで本来の字形を楽しめます。

- =--no-autohint=

  fontforge の機能を利用したヒンティングをスキップします。

  =ttfautohint= など他のツールを使って、あるいは手動でヒンティングを行
  う場合に使います。

- =--reuse-roundedmp=

  中間ファイル =tmp_rounded-mplus-1m-regular.ttf= の生成をスキップして、
  再利用します。すでに一度ビルドしていて、JISZ8903 由来の字形だけを更
  新したい場合に使います。

- =--reuse-jisz8903=

  中間ファイル =tmp_JISZ8903-Medium.ttf= の生成をスキップして、再利用
  します。すでに一度ビルドしていて、Rounded M+ 由来の字形だけを更新し
  たい場合に使います。
